<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture | Finders</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Distributed service management">
    
    <link rel="preload" href="/finders/assets/css/0.styles.4c2a2070.css" as="style"><link rel="preload" href="/finders/assets/js/app.6fc942e5.js" as="script"><link rel="preload" href="/finders/assets/js/2.3c1d55c4.js" as="script"><link rel="preload" href="/finders/assets/js/6.de4f8fde.js" as="script"><link rel="prefetch" href="/finders/assets/js/10.34eb7015.js"><link rel="prefetch" href="/finders/assets/js/11.2d015ca9.js"><link rel="prefetch" href="/finders/assets/js/12.34b088ce.js"><link rel="prefetch" href="/finders/assets/js/13.406fde26.js"><link rel="prefetch" href="/finders/assets/js/14.10a65eac.js"><link rel="prefetch" href="/finders/assets/js/15.ddc31deb.js"><link rel="prefetch" href="/finders/assets/js/16.92b5ed14.js"><link rel="prefetch" href="/finders/assets/js/17.306038a4.js"><link rel="prefetch" href="/finders/assets/js/18.bb0385c2.js"><link rel="prefetch" href="/finders/assets/js/3.97b6d99a.js"><link rel="prefetch" href="/finders/assets/js/4.d011da65.js"><link rel="prefetch" href="/finders/assets/js/5.638a5ce3.js"><link rel="prefetch" href="/finders/assets/js/7.ed8d8b84.js"><link rel="prefetch" href="/finders/assets/js/8.e01d6210.js"><link rel="prefetch" href="/finders/assets/js/9.a4c3102e.js">
    <link rel="stylesheet" href="/finders/assets/css/0.styles.4c2a2070.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/finders/" class="home-link router-link-active"><!----> <span class="site-name">Finders</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/finders/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/finders/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/finders/guide/architecture.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/finders/zh/guide/architecture.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/dxx/finders" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/finders/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/finders/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/finders/guide/architecture.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/finders/zh/guide/architecture.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/dxx/finders" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/finders/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/finders/guide/architecture.html" aria-current="page" class="active sidebar-link">Architecture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/finders/guide/architecture.html#structure" class="sidebar-link">Structure</a></li><li class="sidebar-sub-header"><a href="/finders/guide/architecture.html#service-model" class="sidebar-link">Service Model</a></li></ul></li><li><a href="/finders/guide/getting-started.html" class="sidebar-link">Getting Started</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Open API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/finders/guide/instance-api.html" class="sidebar-link">Instance API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h1> <h2 id="structure"><a href="#structure" class="header-anchor">#</a> Structure</h2> <p>The basic structure as follow:</p> <p align="center"><img src="/finders/assets/img/architecture_en_1.014ddd09.png" alt="architecture_en_1" style="zoom:50%;"></p> <p>Components:</p> <ul><li><p>Clients:</p> <ul><li>Service Provider: The application that provides a callable service</li> <li>Service Consumer: The application that initiates a call to a service</li> <li>Console: A visual console for viewing service information and cluster information</li></ul></li> <li><p>Filter: Intercepts request, outputs log, and forwards request</p></li> <li><p>Handler: Provides HTTP routing processing, receives HTTP request, processes request, invokes service management, synchronizes management, etc</p></li> <li><p>Service Manager: Provides the functions of registering, deregistering, querying, and modifying service instances. Updated the instance heartbeat time to implement service health check</p></li> <li><p>Sync Manager: Manages service instance synchronization and synchronizes tasks</p></li> <li><p>Server Node Manager: Manages cluster nodes, maintains cluster node information, and checks node health</p></li> <li><p>Storage: Storage for registry information</p></li></ul> <h2 id="service-model"><a href="#service-model" class="header-anchor">#</a> Service Model</h2> <p align="center"><img src="/finders/assets/img/architecture_en_2.d076755e.png" alt="architecture_en_2" style="zoom:50%;"></p> <p>Console is a Web application, it is very convenient to view service information and cluster information, it interacts with the server through the ConsoleAPI.</p> <p>After clients integrates with the SDK，clients and registry server interact through OpenAPI, and client send request with service instance information to server. Those clients usually are microservice providers or consumers.</p> <p>The route handler of the registry server is responsible for processing HTTP routes. After receiving the registered instance request, it first reads the request data and verifies the validity of parameters. After passing the verification, the service management will first create the service object, and then fill the instance information into the service object, and then write it into the memory. If the service object already exists, the instance information is directly populated and then written to memory. After the service instance information is saved, active synchronization is triggered. The server synchronizes the new service instance data to other nodes and there is also a scheduled synchronization task to synchronize all registries to other nodes. These two synchronization methods are used to ensure the final consistency of data.</p> <p>After the server receives the query instance request, the routing handler receives and processes it and invokes the service management, which reads the service instance information from the memory and returns it to the client.</p> <p>To ensure that the registry cluster can normally provide external services, a node health status check task is provided on the server. The task periodically checks whether other nodes in the cluster are running properly and then updates the node information.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/5/2022, 3:08:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/finders/guide/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/finders/guide/getting-started.html">
        Getting Started
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/finders/assets/js/app.6fc942e5.js" defer></script><script src="/finders/assets/js/2.3c1d55c4.js" defer></script><script src="/finders/assets/js/6.de4f8fde.js" defer></script>
  </body>
</html>
